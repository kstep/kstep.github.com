function _crm(){function a(){function a(a,b,c){"undefined"==typeof b&&(c=-999999999,b=""),c=c||9999999999;var d=new Date;d.setTime(d.getTime()+1e3*c);var e="; expires="+d.toGMTString();o.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+e+"; path=/"}function b(a){var b=o.cookie.split("; ");a=encodeURIComponent(a);for(var c=0,d=b.length;d>c;c++){var e=b[c].split("=",2);if(e[0]==a)return decodeURIComponent(e[1])}}var c=this;c.set=function(b,c,d){a(b,c,d)},c.get=function(a){return b(a)}}function b(a){function b(a){return"/report"}function c(a){return a.toMessage?a.toMessage():JSON.stringify(a)}var d=this;d.baseUrl=a;var e;if(n.XMLHttpRequest&&"withCredentials"in new n.XMLHttpRequest)e=n.XMLHttpRequest;else{if(!n.XDomainRequest)throw new Error("CORS request API missing");e=n.XDomainRequest}d.send=function(a,f){f=f||"";var g=new e;g.open("POST",d.baseUrl+f+b(a),!0),g.setRequestHeader("Content-Type","application/json; charset=utf-8"),g.send(c(a))}}function c(){return JSON.stringify(this)}function d(a,b){function c(a){return a?a.split("/")[2].replace("www.",""):null}function d(a){if(!a)return{};var b,c,d=/\+/g,e=/([^&=]+)=?([^&]*)/g,f=function(a){return decodeURIComponent(a.replace(d," "))},g=a.split("?")[1]||"";for(b={};c=e.exec(g);)b[f(c[1])]=f(c[2]);return b}function e(){return"undefined"!=typeof n.orientation?"desktop":"mobile"}function f(){return-1!=p.appVersion.indexOf("Win")?"windows":-1!=p.appVersion.indexOf("Mac")?"mac":-1!=p.appVersion.indexOf("Linux")?"linux":-1!=p.appVersion.indexOf("X11")?"unix":void 0}function g(){var a=p.userAgent.toLowerCase();return-1!=a.indexOf("seamonkey/")?"Seamonkey":-1!=a.indexOf("firefox/")?"Firefox":-1!=a.indexOf("chrome/")?"Chrome":-1!=a.indexOf("opera/")||-1!=a.indexOf("opr/")?"Opera":-1!=a.indexOf(";msie ")?"MSIE":-1!=a.indexOf("android")?"Android":void 0}if(!a)throw new Error("argument 'report_type' is required");var h=d(n.location.search),k=d(n.referrer),l={report_type:a,site:b.site,site_version:b.site_version,js_version:i,client_timestamp:(new Date).getTime(),client_timezone:b.timezone,user_id:b.user_id,custom_login_id:b.custom_login_id||void 0,session_id:b.session_id,event_count:++j,browser:g(),device_type:e(),os:f(),user_agent:p.userAgent,site_type:b.site_type,page_url:n.location.href,page_path:n.location.pathname,page_qs:JSON.stringify(h),referrer_url:n.referrer||void 0,referrer_domain:c(n.referrer)||void 0,referrer_qs:JSON.stringify(k)||void 0,campaign_source:k.utm_source||void 0,campaign_id:k.utm_campaign||void 0,ad_id:k.utm_content||void 0,event_category:void 0,event:void 0,optional_params:void 0,optional_params_type:void 0};return l}function e(b,c,d,e,f){function g(){var a=new Date,b=-a.getTimezoneOffset(),c=function(a){return 10>a?"0"+a:""+a},d=c(Math.abs(Math.floor(b/60))),e=c(Math.abs(b%60)),f=0>b?"-":"+";return f+d+":"+e}function h(){var a=(new Date).getTime(),b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;return a=Math.floor(a/16),("x"==b?c:3&c|8).toString(16)});return b}if(!b)throw new Error("argument 'site' is required");if(!c)throw new Error("argument 'siteVersion' is required");if(!f)throw new Error("argument 'sessionExpires_sec' is required");var i=this,j=!1;i.site=b,i.site_version=c,i.site_type=d,i.timezone=g(),i.user_id=a.get("crm_userId"),i.user_id||(i.user_id=h(),a.set("crm_userId",i.user_id)),i.custom_login_id=e||a.get("crm_customLoginId"),a.set("crm_customLoginId",i.custom_login_id),i.session_id=a.get("crm_sessionId"),i.session_id||(i.session_id=h(),a.set("crm_sessionId",i.session_id,f),j=!0),i.extendSession=function(){a.set("crm_sessionId",i.session_id,f)},i.setCustomLoginId=function(b){i.custom_login_id=b,a.set("crm_customLoginId",b)},i.isNewSession=function(){return j}}function f(a){if(!a)throw new Error("argument 'identity' is required");var b=this;b.identity=a,b.getPath=function(){return"/session"}}function g(a,b,c,d,e){if(!a)throw new Error("argument 'identity' is required");if(!c)throw new Error("argument 'category' is required");if(!b)throw new Error("argument 'eventType' is required");var f=this;d=d||{},f.identity=a,f.event={event_type:b,category:c,params:d,options:e},f.getPath=function(){return"/event"}}function h(a,b){if(!a)throw new Error("argument 'identity' is required");if(!b)throw new Error("argument 'profile' is required");var c=this;c.identity=a,c.profile=b,c.getPath=function(){return"/user_profile"}}var i="1.0",j=0,k=this,a=new a,l=void 0,m=void 0,n=window,o=n.document,p=n.navigator;k.init=function(a){if(!a)throw new Error("options argument was not provided");if(!a.site)throw new Error("option 'site' is required");if(!a.siteVersion)throw new Error("option 'siteVersion' is required");if(!a.url)throw new Error("option 'url' is required");if(a.sessionExpires_sec=a.sessionExpires_sec||5400,a.siteType=a.siteType||"desktop",l=new b(a.url),m=new e(a.site,a.siteVersion,a.siteType,a.customLoginId,a.sessionExpires_sec),m.isNewSession()){var c=new f(m);l.send(c)}a.callback&&a.callback()},k.setCustomLoginId=function(a){m.setCustomLoginId(a||void 0)},k.trackEvent=function(a,b,c,d){var e=new g(m,a,b,c,d);l.send(e),m.extendSession()},k.trackEvents=function(a){for(var b=0,c=a;c>b;b++){var d=a[b];k.trackEvent(d.type,d.category,d.params,d.options)}},k.runQueue=function(a){var b,c,d,e;for(d=0,e=a.length;e>d;d++)c=a[d],c instanceof Array&&(b=c.shift(),"_"!==b.charAt(0)&&k[b]instanceof Function&&k[b].apply(k,c))},k.userProfile=function(a){var b=new h(m,a);l.send(b),m.extendSession()},k._jsonpCallback=function(a){},e.prototype.toMessage=c,f.prototype.toMessage=function(){var a=d("session",this.identity);return a.event_category="session",JSON.stringify(a)},g.prototype.toMessage=function(){var a=this,b=d("event_tracking",a.identity);b.event_category=a.event.category,b.event=a.event.event_type;var c=a.event.params;for(var e in c)b["p_"+e]=c[e];return a.event.options&&(b.optional_params_type="event_optional_param",b.optional_params=JSON.stringify(a.event.options)),JSON.stringify(b)},h.prototype.toMessage=function(){var a=this,b=d("user_profile",a.identity);return b.event_category="user_profile",b.optional_params_type="user_info",b.optional_params=JSON.stringify(a.profile),JSON.stringify(b)}}!function(a){a._crm=new _crm,a._crm_options&&_crm.init(a._crm_options),a._crmq&&_crm.runQueue(a._crmq),a._crmq={push:function(){var a=Array.prototype.slice.call(arguments);return _crm.runQueue(a)},concat:function(){for(var a=Array.prototype.slice.call(arguments),b=0,c=a.length;c>b;b++)return _crm.runQueue(a[b])}}}(window);